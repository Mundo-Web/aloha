var S=Object.defineProperty;var C=(t,i,n)=>i in t?S(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n;var u=(t,i,n)=>(C(t,typeof i!="symbol"?i+"":i,n),n);import{j as s}from"./AboutHeader-DEdD30eg.js";import{r as a}from"./index-RYns6xqu.js";import{c as E}from"./ReactAppend-vpV7VTGG.js";import{B}from"./Base-CG95oS9j.js";import{C as D}from"./CreateReactScript-BERtc5uF.js";import{T as I,R as h,D as b}from"./ReactAppend-CDWOQzm8.js";import{M as y}from"./Modal-HDEzC3Rq.js";import{I as R}from"./InputFormGroup-CLeK_lOM.js";import{S as k}from"./SwitchFormGroup-XpIpamlZ.js";import{I as N}from"./ImageFormGroup-NAPwWWo4.js";import{S as T}from"./sweetalert2.all-DJo0UVK6.js";import{B as G}from"./Results-2jWyQwHC.js";import"./index-CXU7o9CY.js";import"./tippy-react.esm-DYFqe69e.js";/* empty css              */import"./Logout-ClY1Lmxq.js";import"./main-BjVPLcVK.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./index.esm-Bla6j_hB.js";/* empty css               */class M extends G{constructor(){super(...arguments);u(this,"path","admin/supplies");u(this,"hasFiles",!0)}}const c=new M,q=({})=>{const t=a.useRef(),i=a.useRef(),n=a.useRef(),p=a.useRef(),m=a.useRef(),l=a.useRef(),[v,d]=a.useState(!1),f=e=>{e!=null&&e.id?d(!0):d(!1),n.current.value=(e==null?void 0:e.id)??"",p.current.value=(e==null?void 0:e.name)??"",m.current.value=(e==null?void 0:e.description)??"",l.image.src=`/api/supplies/media/${e==null?void 0:e.image}`,l.current.value=null,$(i.current).modal("show")},w=async e=>{e.preventDefault();const r={id:n.current.value||void 0,name:p.current.value,description:m.current.value},o=new FormData;for(const x in r)o.append(x,r[x]);const g=l.current.files[0];g&&o.append("image",g),await c.save(o)&&($(t.current).dxDataGrid("instance").refresh(),$(i.current).modal("hide"))},j=async({id:e,value:r})=>{await c.boolean({id:e,field:"visible",value:r})&&$(t.current).dxDataGrid("instance").refresh()},F=async e=>{const{isConfirmed:r}=await T.fire({title:"Eliminar ingrediente",text:"¿Estás seguro de eliminar este ingrediente?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await c.delete(e)||$(t.current).dxDataGrid("instance").refresh()};return s.jsxs(s.Fragment,{children:[s.jsx(I,{gridRef:t,title:"Ingredientes",rest:c,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo ingrediente",hint:"Nuevo ingrediente",onClick:()=>f()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre"},{dataField:"description",caption:"Sirve para..."},{dataField:"image",caption:"Imagen",width:"60px",allowFiltering:!1,cellTemplate:(e,{data:r})=>{h(e,s.jsx("img",{src:`/api/supplies/media/${r.image}`,style:{width:"40px",aspectRatio:5/4,objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:o=>o.target.src="/assets/img/supplies/acido-salicilico.png"}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"120px",cellTemplate:(e,{data:r})=>{h(e,s.jsx(k,{checked:r.visible,onChange:o=>j({id:r.id,value:o.target.checked})}))}},{caption:"Acciones",cellTemplate:(e,{data:r})=>{e.css("text-overflow","unset"),e.append(b({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>f(r)})),e.append(b({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>F(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),s.jsx(y,{modalRef:i,title:v?"Editar ingrediente":"Agregar ingrediente",onSubmit:w,size:"md",children:s.jsxs("div",{className:"row",id:"principal-container",children:[s.jsx("input",{ref:n,type:"hidden"}),s.jsx(N,{eRef:l,label:"Imagen",col:"col-md-4",aspect:5/4,onError:"/assets/img/supplies/acido-salicilico.png"}),s.jsxs("div",{className:"col-md-8",children:[s.jsx(R,{eRef:p,label:"Nombre",required:!0}),s.jsx(R,{eRef:m,label:"Sirve para...",type:"number",step:.01,required:!0})]})]})})]})};D((t,i)=>{E(t).render(s.jsx(B,{...i,title:"Ingredientes",children:s.jsx(q,{...i})}))});
