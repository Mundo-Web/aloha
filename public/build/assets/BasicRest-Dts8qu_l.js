var c=Object.defineProperty;var d=(i,r,t)=>r in i?c(i,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[r]=t;var a=(i,r,t)=>(d(i,typeof r!="symbol"?r+"":r,t),t);import{m as s}from"./main-BjVPLcVK.js";class g{constructor(){a(this,"path",null);a(this,"hasFiles",!1);a(this,"controller",null);a(this,"get",async r=>{try{const{status:t,result:e}=await s.Fetch(`/api/${this.path}/${r}`);if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return e.data}catch(t){return s.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:t.message,type:"danger"}),null}});a(this,"paginate",async r=>{this.controller.abort("Nothing"),this.controller=new AbortController;const t=this.controller.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(s.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(r),signal:t})).json()});a(this,"save",async r=>{try{let t=!1,e={};if(this.hasFiles){const o=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(s.Cookies.get("XSRF-TOKEN"))},body:r});t=o.ok,e=JSON.parseable(await o.text())}else{const o=await s.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(r)});t=o.status,e=o.result}if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:e.message,type:"success"}),e}catch(t){return s.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:t.message,type:"danger"}),null}});a(this,"status",async({id:r,status:t})=>{try{const{status:e,result:o}=await s.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:r,status:t})});if(!e)throw new Error((o==null?void 0:o.message)??"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:o.message,type:"success"}),!0}catch(e){return s.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:e.message,type:"danger"}),!1}});a(this,"boolean",async({id:r,field:t,value:e})=>{try{const{status:o,result:n}=await s.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:r,field:t,value:e})});if(!o)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:n.message,type:"success"}),!0}catch(o){return s.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:o.message,type:"danger"}),!1}});a(this,"delete",async r=>{try{const{status:t,result:e}=await s.Fetch(`/api/${this.path}/${r}`,{method:"DELETE"});if(!t)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:e.message,type:"success"}),!0}catch(t){return s.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:t.message,type:"danger"}),!1}});this.controller=new AbortController}}export{g as B};
