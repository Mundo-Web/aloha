var le=Object.defineProperty;var ne=(x,d,C)=>d in x?le(x,d,{enumerable:!0,configurable:!0,writable:!0,value:C}):x[d]=C;var X=(x,d,C)=>(ne(x,typeof d!="symbol"?d+"":d,C),C);import{j as e}from"./AboutHeader-CpM0iYLI.js";import{r as u}from"./index-B80Lgev0.js";import{c as ie}from"./ReactAppend-CBRQCQGz.js";import{B as ce}from"./Base-du4kT-WE.js";import{G as te,C as de}from"./CreateReactScript-DH4VP3S3.js";import{m as D}from"./main-B2CtU6ez.js";import{i as J}from"./tippy-react.esm-CHhA99mn.js";import{A as ae}from"./CallToAction-Y9yYs4wC.js";import{N as I}from"./Number2Currency-e57Tgsuk.js";import{J as oe}from"./JSEncrypt-D3I3x59l.js";import{R as me}from"./AuthModal-DF0ZBTuI.js";import{S as Y}from"./sweetalert2.all-Dh0rZL5X.js";import{A as ee}from"./AuthRest-DflC-0Al.js";import{N as ue}from"./NewFormulaButton-i0Ux9JQQ.js";import{U as xe}from"./UserFormulasRest-CUuZlsfm.js";import{C as pe}from"./CouponsRest-CF_zR6Xf.js";import{p as B}from"./places-DAXM8Qkz.js";import{c as se}from"./createLucideIcon-Cx5eUsrb.js";import"./index-DO3Aws4m.js";import"./Base-HltkCzf2.js";import"./index-B1nVdsa0.js";import"./index-CqrOtH36.js";import"./index.esm-Cu-mVv1q.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";/* empty css               *//* empty css              */import"./BasicRest-Dr9i-95X.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=se("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=se("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);class W{}X(W,"order",async(d,C)=>{try{const{status:k,result:g}=await D.Fetch("/api/culqi/order",{method:"POST",body:D.JSON.stringify({sale:d,details:C})});if(!k)throw new Error((g==null?void 0:g.message)||"Ocurrio un error inesperado");return D.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:g.message,type:"success"}),g}catch(k){return D.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:k.message,type:"danger"}),null}}),X(W,"token",async d=>{try{const{status:C,result:k}=await D.Fetch("/api/culqi/token",{method:"POST",body:D.JSON.stringify(d)});if(!C)throw new Error((k==null?void 0:k.message)||"Ocurrio un error inesperado");return D.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:k.message,type:"success"}),k}catch(C){return D.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:C.message,type:"danger"}),null}});const ge=({isOpen:x,setIsOpen:d,onClose:C,recaptchaSiteKey:k,session:g,setSession:P})=>{const[q,n]=u.useState(!0),[A,v]=u.useState(!1),[_,f]=u.useState(null),[w,j]=u.useState("01"),[N,h]=u.useState(31),[c,b]=u.useState(!1),[l,y]=u.useState(""),[S,a]=u.useState(""),i=u.useRef(),o=u.useRef(),p=u.useRef(),s=u.useRef(),m=u.useRef(),E=u.useRef(),F=u.useRef(),L=u.useRef(),G=u.useRef(),U=u.useRef(),V=new oe;V.setPublicKey(te.PUBLIC_RSA_KEY);const K=async R=>{R.preventDefault(),v(!0);const O={email:V.encrypt(i.current.value),password:V.encrypt(o.current.value)},$=await ee.login(O);if(!$)return v(!1);P($.data),d(!1)},Z=async R=>{R.preventDefault(),v(!0);const O=L.current.value,$=G.current.value;if(O!=$)return v(!1),Y.fire({icon:"warning",title:"Error",text:"Las contraseñas no coinciden",confirmButtonText:"Ok"});if(!_)return v(!1),Y.fire({icon:"warning",title:"Error",text:"Por favor, complete el captcha",confirmButtonText:"Ok"});const H={name:p.current.value,lastname:s.current.value,month:m.current.value,day:E.current.value,email:F.current.value,password:V.encrypt(O),confirmation:V.encrypt($),captcha:_,notify_me:U.current.checked,type:"direct"},t=await ee.signup(H);v(!1),t&&(a(F.current.value),b(!0))},Q=async R=>{R.preventDefault(),v(!0);const O=await ee.verifyCode({email:S,code:l});v(!1),O&&(P(O.data),d(!1))},z=[];for(let R=1;R<=N;R++)z.push(String(R).padStart(2,"0"));return x?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative",children:e.jsxs("div",{className:"p-6",children:[c?e.jsxs("div",{children:[e.jsx("b",{className:"mb-4 text-[#404040] text-xl block",children:"Verifica tu correo electrónico"}),e.jsxs("p",{className:"text-center text-sm mb-6",children:["Hemos enviado un código de verificación a ",e.jsx("strong",{children:S}),". Por favor, revisa tu bandeja de entrada e ingresa el código a continuación."]}),e.jsxs("form",{onSubmit:Q,children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-md text-center text-2xl tracking-wider",value:l,onChange:R=>y(R.target.value.replace(/\s+/g,"").slice(0,6)),placeholder:"000000",required:!0})}),e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx("button",{type:"submit",disabled:A||l.length!==6,className:"w-max px-8 py-2 bg-[#A191B8] text-white rounded-full block disabled:opacity-50 mb-3",children:A?"VERIFICANDO...":"VERIFICAR CÓDIGO"}),e.jsxs("button",{type:"button",onClick:()=>{b(!1),y(""),f(null),window.grecaptcha&&window.grecaptcha.reset()},className:"text-sm text-gray-500 hover:text-gray-700",children:[e.jsx("i",{className:"mdi mdi-arrow-left mr-1"}),"Volver a registrarse"]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("img",{src:"/assets/img/logo-dark.svg",alt:"",className:"mx-auto h-10 mb-2"}),e.jsx("b",{className:"mb-4 text-[#404040] text-xl block",children:"¡Ahora puedes ser una Vuá lover!"}),e.jsxs("ul",{className:"flex flex-wrap justify-center gap-x-4 gap-y-0 text-sm",children:[e.jsxs("li",{children:[e.jsx("i",{className:"mdi mdi-circle-small"})," Guarda tus fórmulas únicas"]}),e.jsxs("li",{children:[e.jsx("i",{className:"mdi mdi-circle-small"})," Beneficios en tu cumpleaños"]}),e.jsxs("li",{children:[e.jsx("i",{className:"mdi mdi-circle-small"})," Recibe las promos del mes primero"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 p-1 border rounded-xl mb-4",children:[e.jsx("button",{onClick:()=>n(!0),className:`px-4 py-2 rounded-md transition ${q?"bg-[#F1CACD] text-white":"text-[#404040]"}`,children:"INICIA SESIÓN"}),e.jsx("button",{onClick:()=>n(!1),className:`px-4 py-2 rounded-md transition ${q?"text-[#404040]":"bg-[#F1CACD] text-white"}`,children:"REGÍSTRATE"})]}),q?e.jsxs("form",{onSubmit:K,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Correo o Usuario"}),e.jsx("input",{ref:i,type:"email",className:"w-full px-3 py-2 border rounded-md",required:!0,placeholder:"Ingrese su correo o usuario"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Contraseña"}),e.jsx("input",{ref:o,type:"password",className:"w-full px-3 py-2 border rounded-md",required:!0,placeholder:"Ingrese su contraseña"})]}),e.jsx("button",{type:"submit",disabled:A,className:"w-max mx-auto px-8 py-2 bg-[#A191B8] text-white rounded-full block",children:A?"VERIFICANDO...":"INGRESAR"})]}):e.jsxs("form",{onSubmit:Z,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1",children:["Nombres ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:p,type:"text",className:"w-full px-3 py-2 border rounded-md",required:!0,placeholder:"Ingrese su nombre"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1",children:["Apellidos ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:s,type:"text",className:"w-full px-3 py-2 border rounded-md",required:!0,placeholder:"Ingrese sus apellidos"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1",children:["Cumpleaños ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-none w-10 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"mdi mdi-cake-variant"})}),e.jsxs("select",{ref:m,className:"flex-1 px-3 py-2 border rounded-md",onChange:R=>j(R.target.value),value:w,children:[e.jsx("option",{value:"01","data-days":31,children:"Enero"}),e.jsx("option",{value:"02","data-days":29,children:"Febrero"}),e.jsx("option",{value:"03","data-days":31,children:"Marzo"}),e.jsx("option",{value:"04","data-days":30,children:"Abril"}),e.jsx("option",{value:"05","data-days":31,children:"Mayo"}),e.jsx("option",{value:"06","data-days":30,children:"Junio"}),e.jsx("option",{value:"07","data-days":31,children:"Julio"}),e.jsx("option",{value:"08","data-days":31,children:"Agosto"}),e.jsx("option",{value:"09","data-days":30,children:"Septiembre"}),e.jsx("option",{value:"10","data-days":31,children:"Octubre"}),e.jsx("option",{value:"11","data-days":30,children:"Noviembre"}),e.jsx("option",{value:"12","data-days":31,children:"Diciembre"})]}),e.jsx("select",{ref:E,className:"flex-none w-24 px-3 py-2 border rounded-md",children:z.map(R=>e.jsx("option",{value:R,children:R},R))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1",children:["Correo electrónico ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:F,type:"email",className:"w-full px-3 py-2 border rounded-md",required:!0,placeholder:"Ingrese su correo electrónico"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1",children:["Contraseña ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:L,type:"password",className:"w-full px-3 py-2 border rounded-md",required:!0,placeholder:"Ingrese su contraseña"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1",children:["Confirmación ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:G,type:"password",className:"w-full px-3 py-2 border rounded-md",required:!0,placeholder:"Confirme su contraseña"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:U,type:"checkbox",className:"rounded border-gray-300"}),e.jsx("label",{className:"text-sm",children:"Quiero recibir ofertas exclusivas y novedades de vuá"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(me,{sitekey:k,onChange:f})}),e.jsx("button",{type:"submit",disabled:A,className:"w-max mx-auto px-8 py-2 bg-[#A191B8] text-white rounded-full block",children:A?"VERIFICANDO...":"¡SER VUÁ LOVER!"})]})]}),e.jsx("button",{onClick:C,className:"absolute top-2 right-2 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:e.jsx("span",{className:"mdi mdi-close"})})]})})}):null},je=({formula:x,otherFormulas:d,goToNextPage:C,goToPrevPage:k,items:g=[],defaultColors:P={},setSelectedPlan:q})=>{const[n,A]=u.useState((D.Local.get("vua_cart")??[]).filter(f=>!!f.formula_id));u.useEffect(()=>{A(f=>f.map(w=>{var y;const j=((y=g.find(S=>S.id==w.id))==null?void 0:y.colors)??[],N=w.colors??[],h=w.quantity,c=h-N.length,b=structuredClone(j).sort((S,a)=>P[w.id]==S.id?-1:1),l=new Array(c>0?c:0).fill((b==null?void 0:b[0])??null);return N.length<h?w.colors=[...N,...l].filter(Boolean):w.colors=N.slice(0,h).filter(Boolean),w}))},[null]);const v=(f,w,j,N)=>{const h=N??(x==null?void 0:x.id);A(c=>c.map(b=>(b.id==f&&b.formula_id==h&&(b.colors[w]=j),b)))},_=()=>{d.length>0?(q(null),C(2)):C()};return u.useEffect(()=>{D.Local.set("vua_cart",n)},[n]),u.useEffect(()=>{ae.init()},[null]),e.jsxs("section",{className:"px-[3%] lg:px-[10%] py-[10%] md:py-[7.5%] lg:py-[5%] bg-[#F9F3EF] text-center text-[#404040]",children:[e.jsxs("div",{className:"max-w-2xl mx-auto ",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"¡Ahora selecciona el color!"}),e.jsxs("p",{className:"mb-8 text-sm font-extralight",children:[e.jsx("span",{children:"Elije tus colores favoritos para tu rutina"}),e.jsx("img",{className:"w-4 inline-block ms-2",src:"/assets/img/emojis/stars.png",alt:"Elije tus colores favoritos para tu rutina"})]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-5 mt-5 sm:mt-8 lg:mt-10",children:n.sort((f,w)=>{const j=d.find(h=>h.id==f.formula_id)??x,N=d.find(h=>h.id==w.formula_id)??x;return j.created_at<N.created_at?-1:1}).map((f,w)=>{var c,b;const j=d.findIndex(l=>l.id==f.formula_id)+1,N=d.find(l=>l.id==f.formula_id)??x,h=((c=g.find(l=>l.id==f.id))==null?void 0:c.colors)??[];return h.length==0?null:(b=f.colors)==null?void 0:b.map((l,y)=>e.jsx("div",{className:"overflow-hidden w-full md:w-[calc(50%-10px)] lg:w-[calc(33.333%-13.33px)] bg-white rounded-2xl shadow-md","data-aos":"fade-down",children:e.jsxs("div",{className:"flex flex-row gap-2 items-center p-2",children:[e.jsx("div",{className:"",children:e.jsx("img",{className:"h-[120px] aspect-[3/4] object-cover object-center rounded-md",src:`/api/colors/media/${l==null?void 0:l.image}`,alt:f.name})}),e.jsx("div",{className:"",children:e.jsx("div",{className:"flex flex-wrap gap-3 items-end self-stretch my-auto ",children:e.jsxs("div",{className:"flex flex-col items-start self-stretch",children:[e.jsxs("small",{className:"block mb-1 font-bold",children:[e.jsx("i",{className:"mdi mdi-flask me-1"}),j==0?"Fórmula principal":e.jsxs(e.Fragment,{children:[j+1,e.jsx("sup",{children:"a"})," fórmula"]})]}),e.jsxs("h2",{className:"text-lg font-semibold tracking-normal leading-none text-neutral-700 mb-2",children:[f.name," ",y+1]}),e.jsx("p",{className:" text-sm font-light tracking-normal leading-none text-neutral-700 mb-2",children:"Selecciona tu color:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:h.map((S,a)=>{const i=(l==null?void 0:l.id)==S.id;return e.jsx(J,{content:S.name,children:e.jsx("button",{className:`flex shrink-0 w-8 aspect-square rounded-full border ${i?"shadow-md border-[#000000]":""}`,style:{backgroundColor:S.hex||"#fff"},onClick:()=>v(f.id,y,S,N.id)})},a)})})]})})})]})},`existence-${w}-${y}`))}).filter(Boolean)}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 mx-auto md:mx-[12.5%] mt-5 sm:mt-10",children:[e.jsxs("button",{onClick:()=>k(),className:"bg-[#C5B8D4] text-white text-sm px-16 py-3 rounded mt-4",children:[e.jsx("i",{className:"mdi mdi-arrow-left me-1"}),"VOLVER"]}),e.jsxs("button",{onClick:_,className:"bg-[#C5B8D4] text-white text-sm px-14 py-3 rounded mt-4",children:["SIGUIENTE",e.jsx("i",{className:"mdi mdi-arrow-right ms-1"})]})]})]})},Ne=({otherFormulas:x,goToNextPage:d,goToPrevPage:C,setSelectedPlan:k,bundles:g=[],planes:P=[],session:q,setSession:n,recaptchaSiteKey:A})=>{const[v,_]=u.useState(!1),f=D.Local.get("vua_cart")??[],w=f.reduce((l,y)=>l+y.price*y.quantity,0),j=f.reduce((l,y)=>l+y.quantity,0),N=g.filter(l=>{switch(l.comparator){case"<":return j<l.items_quantity;case">":return j>l.items_quantity;default:return j==l.items_quantity}}).sort((l,y)=>y.percentage-l.percentage),h=(N==null?void 0:N[0])??null,c=Math.round(w*(1-((h==null?void 0:h.percentage)||0))*10)/10,b=l=>{k(l),d()};return u.useEffect(()=>{x.length>0&&b(null)},[null]),u.useEffect(()=>{q!=null&&q.id&&_(!1)},[q]),e.jsxs("section",{className:"px-[3%] lg:px-[10%] py-[10%] md:py-[7.5%] lg:py-[5%] bg-[#F9F3EF] text-center",children:[e.jsxs("div",{className:"max-w-2xl mx-auto ",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"¡Elije la frecuencia de tu pedido!"}),e.jsx("p",{className:"mb-8 text-sm font-extralight",children:"Conoce de qué manera puedes ahorrar en tu rutina"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4 mt-5 sm:mt-8 lg:mt-10 items-center justify-center",children:[e.jsxs("div",{className:"transition-all cursor-pointer p-6 bg-white group hover:bg-[#EFBEC1] hover:text-white rounded-2xl grid grid-cols-2 items-center justify-between gap-4 shadow-md h-full",onClick:()=>b(null),children:[e.jsxs("div",{className:"text-start",children:[e.jsx("span",{className:"block font-extralight",children:"Comprar por"}),e.jsx("span",{className:"block font-bold mb-2 -mt-1 text-[#303030]",children:"1 sola vez"})]}),e.jsx("div",{className:"flex flex-col gap-2 text-end",children:e.jsxs("span",{className:"ms-auto text-4xl text-[#C0AFD4] group-hover:text-white font-extrabold tracking-tighter",children:["S/",I(c)]})})]}),x.length==0&&e.jsx(e.Fragment,{children:!(q!=null&&q.id)&&P.length>0?e.jsxs("div",{className:"p-4 text-center flex flex-col gap-2 items-center",children:[e.jsxs("span",{children:["o inicia sesion para acceder a ",e.jsx("br",{}),e.jsx("b",{children:"planes de suscripcion"})]}),e.jsx("button",{onClick:()=>_(!0),className:"block rounded-full px-3 py-2 bg-[#A191B8] text-white text-sm uppercase",children:"Iniciar sesion"})]}):P.sort((l,y)=>y.percentage-l.percentage).map((l,y)=>{const S=Math.round((c-c*l.percentage)*10)/10;return e.jsxs("div",{className:"cursor-pointer p-6 bg-white transition-all rounded-2xl grid grid-cols-2 items-center justify-between gap-4 shadow-md h-full hover:bg-[#EFBEC1] hover:text-white peer-checked:bg-[#EFBEC1] peer-checked:text-white group",onClick:()=>b(l.id),children:[e.jsxs("div",{className:"text-start",children:[e.jsx("span",{className:"block",children:"Suscripción"}),e.jsxs("span",{className:"block font-bold mb-2 -mt-1",children:["Cada ",l.name]}),e.jsx("div",{className:"border border-[#404040] text-xs px-2 py-1 rounded-full w-max  group-hover:border-white peer-checked:border-white ",children:"+ Envío gratis Lima Met."})]}),e.jsxs("div",{className:"flex flex-col gap-2 text-end",children:[e.jsxs("span",{className:"ms-auto text-nowrap text-xs px-2 py-1 rounded-full w-max text-white bg-[#C0AFD4] group-hover:text-[#EEA9D2] group-hover:bg-white peer-checked:text-[#EEA9D2] peer-checked:bg-white ",children:["-",l.percentage*100,"%OFF",e.jsx("img",{className:"w-3 inline-block ms-1",src:"/assets/img/emojis/fire.png",alt:"-{plan.percentage * 100}%OFF"})]}),e.jsxs("span",{className:"ms-auto text-4xl text-[#C0AFD4] font-bold group-checked:text-white group-hover:text-white",children:["S/",I(S)]})]})]},y)})})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2 mx-auto md:mx-[12.5%] mt-5 sm:mt-10",children:e.jsxs("button",{onClick:()=>C(),className:"bg-[#C5B8D4] text-white text-sm px-16 py-3 rounded mt-4",children:[e.jsx("i",{className:"mdi mdi-arrow-left me-1"}),"VOLVER"]})}),e.jsx(ge,{session:q,setSession:n,isOpen:v,setIsOpen:_,onClose:()=>_(!1),recaptchaSiteKey:A})]})},ye=new xe,ve=({formula:x,otherFormulas:d,setOtherFormulas:C,goToNextPage:k,items:g=[],bundles:P=[],freeShipping:q,freeShippingBannerText:n})=>{const A=D.Local.get("vua_cart")??g.map(a=>{const i=structuredClone(a);if(delete i.colors,!!i.is_default)return i.quantity=1,i.formula_id=x.id,i}).filter(Boolean),[v,_]=u.useState(A.filter(a=>!!g.find(i=>a.id==i.id))??[]),f=v.reduce((a,i)=>a+i.price*i.quantity,0),w=(a,i,o)=>{const p=o??x.id,s=a.target.checked;_(s?m=>[...m,{...i,quantity:1,formula_id:p}]:m=>m.filter(E=>!(E.id==i.id&&E.formula_id==p)))},j=v.reduce((a,i)=>a+i.quantity,0),N=P.filter(a=>{switch(a.comparator){case"<":return j<a.items_quantity;case">":return j>a.items_quantity;default:return j==a.items_quantity}}).sort((a,i)=>i.percentage-a.percentage),h=(N==null?void 0:N[0])??null,c=Math.round(f*(1-((h==null?void 0:h.percentage)||0))*10)/10,b=(a,i)=>{const o=i??x.id;v.find(p=>p.id==a.id&&p.formula_id==o)?_(p=>p.map(s=>(s.id==a.id&&s.formula_id==o&&s.quantity++,s))):(document.getElementById(`item-${a.id}`).checked=!0,_(p=>[...p,{...a,quantity:1,formula_id:o}]))},l=(a,i)=>{const o=i??x.id;_(p=>p.map(s=>(s.id==a.id&&s.formula_id==o&&s.quantity--,s.quantity<=0?document.getElementById(`item-${a.id}`).checked=!1:s)).filter(Boolean))},y=async a=>{const{isConfirmed:i}=await Y.fire({title:"¿Estás seguro?",text:"¿Estás seguro de eliminar esta fórmula?",showCancelButton:!0,confirmButtonColor:"#71b6f9",cancelButtonColor:"#d94d4d",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!i||!await ye.delete(a)||(C(p=>p.filter(s=>s.id!=a)),_(p=>p.filter(s=>s.formula_id!=a)))},S=async()=>{const a=v.some(o=>o.formula_id===x.id),i=d.every(o=>v.some(p=>p.formula_id===o.id));if(!a||!i){await Y.fire({title:"¡Hay una fórmula vacía!",text:"Selecciona al menos un producto por fórmula.",confirmButtonColor:"#71b6f9",confirmButtonText:"Entendido"});return}k()};return u.useEffect(()=>{D.Local.set("vua_cart",v)},[v]),u.useEffect(()=>{ae.init()},[null]),e.jsxs("form",{className:"px-[3%] lg:px-[10%] py-[10%] md:py-[7.5%] lg:py-[5%] bg-[#F9F3EF] text-center text-[#404040]",children:[e.jsxs("div",{className:"max-w-2xl mx-auto ",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"¡Selecciona tus productos personalizados!"}),e.jsxs("p",{className:"mb-8 text-sm font-extralight",children:[e.jsx("span",{children:"Para mejores resultados arma una rutina completa"}),e.jsx("img",{className:"w-4 inline-block ms-2",src:"/assets/img/emojis/stars.png",alt:"Para mejores resultados arma una rutina completa"})]})]}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"block w-1/2 mx-auto mb-4"}),e.jsxs("h2",{className:"text-xl mb-6",children:["Productos para tu ",e.jsx("b",{children:"fórmula principal"})]})]}),e.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4",children:g.map((a,i)=>{const o=structuredClone(a);delete o.colors;const p=v.find(m=>m.id==o.id&&m.formula_id==x.id),s=(p==null?void 0:p.quantity)??0;return e.jsxs("div",{className:"flex flex-col w-[180px] whitespace-nowrap","data-aos":"fade-up",children:[e.jsx("input",{type:"checkbox",name:"",id:`item-${o.id}`,className:"peer hidden",onChange:m=>w(m,o),checked:!!p,required:!0}),e.jsxs("label",{htmlFor:`item-${o.id}`,className:"flex overflow-hidden flex-col tracking-normal leading-none text-center bg-white rounded-xl border peer-checked:border-[#808080] peer-checked:shadow-md text-[#404040] cursor-pointer mb-3 transition-all",children:[e.jsx("img",{loading:"lazy",src:`/api/items/media/${o.image}`,className:"object-cover object-center aspect-[3/4] w-full border-b",alt:"Shampoo product image",onError:m=>m.target.src="/assets/img/routine/conditioner.png"}),e.jsx("h2",{className:"self-center px-4 py-3",children:o.name})]}),e.jsxs("div",{className:"flex gap-5 justify-between items-center self-center py-1 text-sm bg-transparent rounded-lg border border-[#808080] w-[70%] px-4 font-bold",children:[e.jsx("button",{type:"button",className:"disabled:cursor-not-allowed",onClick:()=>l(o),disabled:s<=0,children:"-"}),e.jsx("span",{children:s}),e.jsx("button",{type:"button",className:"disabled:cursor-not-allowed",onClick:()=>b(o),children:"+"})]})]},i)})})}),d.length>0&&d.map((a,i)=>e.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[e.jsxs("h2",{className:"text-xl mb-6",children:["Productos para tu ",e.jsxs("b",{children:[i+2,e.jsx("sup",{children:"a"})," fórmula"]}),e.jsx(J,{content:"Eliminar esta fórmula",children:e.jsx("i",{className:"mdi mdi-trash-can-outline text-red-400 font-bold ms-2 cursor-pointer",onClick:()=>y(a.id)})})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4",children:g.map((o,p)=>{const s=structuredClone(o);delete s.colors;const m=v.find(F=>F.id==s.id&&F.formula_id==a.id),E=(m==null?void 0:m.quantity)??0;return e.jsxs("div",{className:"flex flex-col w-[180px] whitespace-nowrap","data-aos":"fade-up",children:[e.jsx("input",{type:"checkbox",name:"",id:`item-${s.id}-${a.id}`,className:"peer hidden",onChange:F=>w(F,s,a.id),checked:!!m,required:!0}),e.jsxs("label",{htmlFor:`item-${s.id}-${a.id}`,className:"flex overflow-hidden flex-col tracking-normal leading-none text-center bg-white rounded-xl border peer-checked:border-[#808080] peer-checked:shadow-md text-[#404040] cursor-pointer mb-3 transition-all",children:[e.jsx("img",{loading:"lazy",src:`/api/items/media/${s.image}`,className:"object-cover object-center aspect-[3/4] w-full border-b",alt:"Shampoo product image",onError:F=>F.target.src="/assets/img/routine/conditioner.png"}),e.jsx("h2",{className:"self-center px-4 py-3",children:s.name})]}),e.jsxs("div",{className:"flex gap-5 justify-between items-center self-center py-1 text-sm bg-transparent rounded-lg border border-[#808080] w-[70%] px-4 font-bold",children:[e.jsx("button",{type:"button",className:"disabled:cursor-not-allowed",onClick:()=>l(s,a.id),disabled:E<=0,children:"-"}),e.jsx("span",{children:E}),e.jsx("button",{type:"button",className:"disabled:cursor-not-allowed",onClick:()=>b(s,a.id),children:"+"})]})]},p)})})]},i)),(d==null?void 0:d.length)<3&&e.jsx(ue,{formula:x,roundedFull:!0,showIcon:!0}),e.jsxs("div",{className:"max-w-2xl mx-auto mt-5 sm:mt-8 lg:mt-10 px-[3%]",children:[e.jsxs("p",{className:"text-md",children:["Agrega más de un producto y ",e.jsx("b",{children:"obtén nuestros descuentos"})," por packs."]}),q=="true"&&e.jsx("div",{children:e.jsx("div",{className:"text-sm font-semibold bg-[#C5B8D4] text-white rounded-3xl mt-4 py-4 px-[5%] whitespace-pre-line shadow-lg",children:n})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center bg-[#EFBEC1] text-white rounded-3xl mt-4 py-4 px-[5%] font-extrabold shadow-lg",children:[e.jsxs("div",{className:"text-xl text-start",children:["Elegiste ",h?h.name:e.jsxs(e.Fragment,{children:[j," ",j==1?"producto":"productos"]}),h&&e.jsx("span",{className:"block text-xs font-light",children:h.description})]}),e.jsxs("div",{className:"flex flex-row text-white items-center gap-4",children:[f!=c&&e.jsxs("p",{className:"font-light line-through",children:["Antes: S/",I(f)]}),e.jsxs("h2",{className:"text-2xl",children:["S/",I(c)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 mx-auto md:mx-[12.5%] mt-5 sm:mt-10",children:[e.jsxs("a",{href:`/test/result/${x.id}`,className:"bg-[#C5B8D4] text-white text-sm px-16 py-3 rounded mt-4",children:[e.jsx("i",{className:"mdi mdi-arrow-left me-1"}),"VOLVER"]}),e.jsxs("button",{onClick:S,className:"bg-[#C5B8D4] text-white text-sm px-14 py-3 tracking-widest rounded mt-4 disabled:cursor-not-allowed leadin",disabled:j==0,children:["SIGUIENTE",e.jsx("i",{className:"mdi mdi-arrow-right ms-1"})]})]})]})},we=new pe,Ce=({formula:x,otherFormulas:d,goToPrevPage:C,publicKey:k,selectedPlan:g,bundles:P,planes:q,session:n,freeShipping:A,freeShippingMinimumAmount:v,freeShippingAmount:_,freeShippingZones:f})=>{var Q,z,R,O,$,H;const w=u.useRef(null);Culqi.publicKey=k??"",Culqi.options({paymentMethods:{tarjeta:!0,yape:!g,billetera:!g,bancaMovil:!g,agente:!g,cuotealo:!1},installments:!g,style:{logo:`${location.origin}/assets/img/icon-purple.svg`,bannerColor:"#A191B8"}});const j=D.Local.get("vua_cart"),[N,h]=u.useState(!1),[c,b]=u.useState(null),l=j.reduce((t,r)=>t+r.price*r.quantity,0),y=j.reduce((t,r)=>t+r.quantity,0),S=P.filter(t=>{switch(t.comparator){case"<":return y<t.items_quantity;case">":return y>t.items_quantity;default:return y==t.items_quantity}}).sort((t,r)=>r.percentage-t.percentage),a=(S==null?void 0:S[0])??null,i=l*((a==null?void 0:a.percentage)||0);let o=0;if(A=="true"&&!g)for(const t of f.split(","))l-i>=v?(B[t].delivery="Gratis",o=0):(B[t].delivery=`S/ ${I(_)}`,o=Number(_));const p=Object.keys(B).find(t=>B[t].name==(n==null?void 0:n.department)),[s,m]=u.useState({name:(n==null?void 0:n.name)||null,lastname:(n==null?void 0:n.lastname)||null,email:x.email,phone:(n==null?void 0:n.phone)||null,country:"Perú",department:p?p||"provincias":null,province:(n==null?void 0:n.province)||(n==null?void 0:n.department)||null,district:(n==null?void 0:n.district)||null,zip_code:(n==null?void 0:n.zip_code)||null,address:(n==null?void 0:n.address)||null,number:(n==null?void 0:n.address_number)||null,reference:(n==null?void 0:n.address_reference)||null,comment:null,billing_type:"boleta",billing_number:""}),E=q.find(t=>t.id==g),F=(l-i)*((E==null?void 0:E.percentage)||0);let L=0;c&&(c.type=="fixed_amount"?L=(c==null?void 0:c.amount)||0:c.type=="percentage"&&(L=(l-i-F)*((c==null?void 0:c.amount)||0)/100));const G=()=>{let t="Lima",r="Lima",M=null;return Array.isArray(B[s.department].items)?(t=B[s.department].name,r=s.province,M=null):(t=s.province,r=null,M=s.district),{...s,department_code:s.department,department:t,province:r,district:M}},U=async t=>{if(t.preventDefault(),N)return;h(!0);let r=null;if(l>6){const M=await W.order({...G(),order_number:Culqi.order_number,user_formula_id:x.id,renewal_id:g,coupon:(c==null?void 0:c.name)??null},j);M&&(r=M.data.id,Culqi.order_number=M.data.order_number)}h(!1),Culqi.settings({title:`${te.APP_NAME} ${g?"(Suscripción)":""}`.trim(),currency:"PEN",amount:Math.round(Math.ceil((l-i-F-L+o)*100)/10)*10,order:r}),Culqi.open()};window.culqi=async()=>{if(Culqi.token)await W.token({order:Culqi.order_number,token:Culqi.token})&&(location.href="/thanks");else if(Culqi.order){V();const t=Culqi.order_number.replace(`#${te.APP_CORRELATIVE}-`,"");fetch(`/api/sales/notify/${t}`)}};const V=()=>{setInterval(()=>{Culqi.isOpen||(location.href="/thanks")},500)},K=t=>{t.preventDefault();const r=(w.current.value||"").trim().toUpperCase();r&&we.save({coupon:r,amount:l,email:x.email}).then(M=>{b(M?M.data:null)})},Z=t=>{t.key=="Enter"&&K(t)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"px-[5%] md:px-[7.5%] lg:px-[10%] pb-[5%] mt-[7.5%] md:mt-[5%] lg:mt-[2.5%] text-[#404040]",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex justify-center space-x-8 text-sm text-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"SSL Pago Seguro"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"24/7 Atención al cliente"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Pago online"})]})]}),e.jsx("form",{className:"w-full rounded-lg bg-white p-8 shadow-lg",onSubmit:U,disabled:N,children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-5 relative",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("button",{onClick:()=>C(d.length>0?2:1),className:"bg-[#C5B8D4] text-white text-sm px-4 py-2 rounded mb-4",children:[e.jsx("i",{className:"mdi mdi-arrow-left me-1"}),"VOLVER"]}),e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Información del cliente"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"firstName",children:["Nombre ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"firstName",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.name,onChange:t=>m(r=>({...r,name:t.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"lastName",children:["Apellidos ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"lastName",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.lastname,onChange:t=>m(r=>({...r,lastname:t.target.value})),required:!0})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"email",children:["Dirección de correo electrónico ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.email,placeholder:"Dirección de correo electrónico",onChange:t=>m(r=>({...r,email:t.target.value})),required:!0,disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"phone",children:["Teléfono/Celular ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex border rounded-md border-gray-300",children:[e.jsx("span",{className:"py-2 px-3 border-e",children:"+51"}),e.jsx("input",{type:"tel",id:"phone",className:"w-full p-2 text-sm outline-none",value:s.phone,onChange:t=>m(r=>({...r,phone:t.target.value})),placeholder:"900000000",required:!0})]})]}),e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Dirección del cliente"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"country",children:["País / Región ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"country",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.country,disabled:!0,required:!0})]}),e.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-5",children:e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"department",children:["Región / Provincia ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"department",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.department||"",onChange:t=>m(r=>({...r,department:t.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Elige una opción"}),Object.keys(B).map((t,r)=>e.jsx("option",{value:t,children:B[t].name},r))]})]})}),B[s.department]&&e.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-5",children:Array.isArray(B[s.department].items)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"district",children:["Provincia ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"province",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.province,onChange:t=>m(r=>({...r,province:t.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Elige una opción"}),B[s.department].items.map((t,r)=>e.jsx("option",{value:t,children:t},r))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:"Código postal"}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.zip_code,onChange:t=>m(r=>({...r,zip_code:t.target.value}))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:["Departamento ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.province??(n==null?void 0:n.department),onChange:t=>m(r=>({...r,province:t.target.value})),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:["Distrito ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.district,onChange:t=>m(r=>({...r,district:t.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:"Código postal"}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.zip_code,onChange:t=>m(r=>({...r,zip_code:t.target.value}))})]})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-5 lg:grid-cols-3",children:[e.jsxs("div",{className:"md:col-span-3 lg:col-span-2",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"address",children:["Dirección de la calle ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"address",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.address,placeholder:"Nombre de la calle y número de la calle",onChange:t=>m(r=>({...r,address:t.target.value})),required:!0})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"number",children:["Número ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"number",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.number,placeholder:"Nombre de la calle y número de la calle",onChange:t=>m(r=>({...r,number:t.target.value})),required:!0})]})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"apartment",children:"Apartamento, habitación, piso, etc. (opcional)"}),e.jsx("input",{type:"text",id:"apartment",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.reference,onChange:t=>m(r=>({...r,reference:t.target.value}))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"orderNotes",children:"Notas del pedido (opcional)"}),e.jsx("textarea",{id:"orderNotes",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",rows:3,placeholder:"Notas sobre tu pedido, por ejemplo, notas especiales para la entrega.",value:s.comment||"",onChange:t=>m(r=>({...r,comment:t.target.value})),style:{minHeight:81,fieldSizing:"content"}})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold",children:"Pago"}),e.jsxs("div",{className:"rounded-md border border-gray-300",children:[e.jsxs("div",{className:"p-4 py-3 flex justify-between",children:[e.jsx("img",{className:"h-4",src:"/assets/img/checkout/culqi-logo.svg",alt:"Culqi"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:"h-4",src:"/assets/img/checkout/cards.svg",alt:"Cards"}),e.jsx("img",{className:"h-4",src:"/assets/img/checkout/pagoefectivo.svg",alt:"Pago efectivo"}),e.jsx("img",{className:"h-4",src:"/assets/img/checkout/yape.svg",alt:"Yape"})]})]}),e.jsxs("p",{className:"text-xs bg-[#f9f9f9] p-4 px-6 rounded-b",children:["Acepta pagos con ",e.jsx("b",{children:"tarjetas de débito y crédito, Yape, Cuotealo BCP y PagoEfectivo"}),"(billeteras móviles, agentes y bodegas)."]})]})]}),e.jsx("div",{className:"mt-6 text-xs",children:e.jsxs("p",{className:"text-justify",children:["Sus datos personales se utilizarán para procesar su pedido, respaldar su experiencia en este sitio web y para otros fines descritos en nuestra "," ",e.jsx("a",{href:"#",className:"text-purple-600 hover:underline",children:"política de privacidad"}),"."]})})]}),e.jsxs("div",{className:"lg:col-span-2 relative",children:[e.jsxs("div",{className:"block mb-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Tu pedido"}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"mb-4 flex justify-between border-b pb-2 font-bold",children:[e.jsx("span",{className:"",children:"Producto"}),e.jsx("span",{className:"",children:"Subtotal"})]}),e.jsx("div",{className:"mb-2",children:j.map((t,r)=>{var M;return e.jsxs("div",{className:"mb-1 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 aspect-[3/4] relative",children:e.jsx("img",{className:"h-10 aspect-[3/4] object-cover object-center rounded-md border",src:`/api/colors/media/${(M=t.colors[0])==null?void 0:M.image}`,alt:t.name,onError:T=>T.target.src=`/api/items/media/${t.image}`})}),e.jsxs("div",{children:[e.jsx("p",{children:t.name}),e.jsxs("small",{className:"text-xs text-gray-500",children:[e.jsxs("span",{className:"w-6 inline-block text-nowrap",children:["× ",t.quantity]}),e.jsx("div",{className:"inline-flex flex-wrap gap-0.5",children:t.colors.map((T,re)=>e.jsx("i",{className:"mdi mdi-circle",style:{color:(T==null?void 0:T.hex)??"#000",WebkitTextStroke:"1px #808080"}},re))})]})]})]}),e.jsxs("span",{className:"",children:["S/ ",I(t.price*t.quantity)]})]},r)})}),e.jsxs("div",{className:"mb-2 mt-4 flex justify-between border-b pb-2 text-sm font-bold",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["S/ ",I(Math.round(l*10)/10)]})]}),a&&e.jsxs("div",{className:"mb-2 mt-2 flex justify-between items-center border-b pb-2 text-sm font-bold",children:[e.jsxs("span",{children:["Descuento x paquete",e.jsxs("small",{className:"block text-xs font-light",children:["Elegiste ",a.name," (-",Math.round(a.percentage*1e4)/100,"%)"]})]}),e.jsxs("span",{children:["S/ -",I(Math.round(i*10)/10)]})]}),E&&e.jsxs("div",{className:"mb-2 mt-2 flex justify-between items-center border-b pb-2 text-sm font-bold",children:[e.jsxs("span",{children:["Subscripción",e.jsxs("small",{className:"block text-xs font-light",children:[E.name," (-",Math.round(E.percentage*1e4)/100,"%)"]})]}),e.jsxs("span",{children:["S/ -",I(Math.round(F*10)/10)]})]}),c&&e.jsxs("div",{className:"mb-2 mt-2 flex justify-between items-center border-b pb-2 text-sm font-bold",children:[e.jsxs("span",{children:["Cupón aplicado ",e.jsx(J,{content:"Eliminar",children:e.jsx("i",{className:"mdi mdi-close text-red-500 cursor-pointer",onClick:()=>b(null)})}),e.jsxs("small",{className:"block text-xs font-light",children:[c.name," ",e.jsx(J,{content:c.description,children:e.jsx("i",{className:"mdi mdi-information-outline ms-1"})})," (",c.type=="fixed_amount"?`S/ -${I(c.amount)}`:`-${Math.round(c.amount*100)/100}%`,")"]})]}),e.jsxs("span",{children:["S/ -",I(L)]})]}),s.department&&e.jsxs("div",{className:"mb-4 flex justify-between text-sm border-b pb-2",children:[e.jsx("span",{className:"font-bold",children:"Envío"}),e.jsx("span",{children:typeof((z=(Q=B)==null?void 0:Q[s.department])==null?void 0:z.delivery)=="number"?`S/ ${I((O=(R=B)==null?void 0:R[s.department])==null?void 0:O.delivery)}`:(H=($=B)==null?void 0:$[s.department])==null?void 0:H.delivery})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",I(Math.round((l-i-F-L+o)*10)/10)]})]})]}),!c&&e.jsxs("div",{className:"mt-6 flex",children:[e.jsx("input",{ref:w,type:"text",placeholder:"Código de cupón",className:"w-full rounded-l-md border border-gray-300 p-2 px-4 text-sm outline-none uppercase focus:border-[#C5B8D4]",value:c==null?void 0:c.name,onKeyDown:Z,disabled:N}),e.jsx("button",{className:"rounded-r-md bg-[#C5B8D4] px-4 py-2 text-sm text-white",type:"button",onClick:K,disabled:N,children:"Aplicar"})]})]}),e.jsxs("div",{className:"block sticky top-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Datos de facturacion"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"mb-1 block text-sm font-medium ",htmlFor:"billing_type",children:["Tipo de comprobante ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"billing_type",value:"boleta",id:"billing_type_boleta",defaultChecked:s.billing_type=="boleta",className:"hidden peer",onChange:t=>m(r=>({...r,billing_type:t.target.value})),checked:s.billing_type=="boleta",required:!0}),e.jsxs("label",{htmlFor:"billing_type_boleta",className:"flex gap-1.5 items-center justify-center px-2 py-1 border rounded-md cursor-pointer peer-checked:bg-[#C5B8D4] peer-checked:text-white transition-colors",children:[e.jsx("i",{className:"mdi mdi-account text-lg"}),e.jsx("span",{children:"Boleta"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"billing_type",value:"factura",id:"billing_type_factura",defaultChecked:s.billing_type=="factura",className:"hidden peer",onChange:t=>m(r=>({...r,billing_type:t.target.value})),checked:s.billing_type=="factura",required:!0}),e.jsxs("label",{htmlFor:"billing_type_factura",className:"flex gap-1.5 items-center justify-center px-2 py-1 border rounded-md cursor-pointer peer-checked:bg-[#C5B8D4] peer-checked:text-white transition-colors",children:[e.jsx("i",{className:"mdi mdi-office-building text-lg"}),e.jsx("span",{children:"Factura"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-1 block text-sm font-medium ",htmlFor:"billing_number",children:["Documento ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"billing_number",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:s.billing_number,maxLength:s.billing_type=="boleta"?8:11,minLength:s.billing_type=="boleta"?8:11,required:!0,onChange:t=>m(r=>({...r,billing_number:t.target.value}))})]}),e.jsxs("button",{type:"submit",className:"mt-6 w-full rounded-md bg-[#C5B8D4] py-3 text-white disabled:cursor-not-allowed",disabled:N,children:[e.jsx("i",{className:"mdi mdi-lock me-1"}),"Pagar Ahora",e.jsxs("small",{className:"ms-1",children:["(S/ ",I(Math.round((l-i-F-L+o)*10)/10),")"]})]})]})]})]})})]})})})},ke=x=>{const{user_formula:d,other_formulas:C,items:k,recaptchaSiteKey:g,defaultColors:P,publicKey:q,session:n,bundles:A,planes:v,free_shipping:_,free_shipping_minimum_amount:f,free_shipping_amount:w,free_shipping_zones:j,free_shipping_banner:N}=x,[h,c]=u.useState(n),[b,l]=u.useState(0),[y,S]=u.useState(null),[a,i]=u.useState(C.sort((E,F)=>E.created_at<F.created_at?1:-1)),o=(E=1)=>{b<s.length-1&&l(b+E)},p=(E=1)=>{b>0&&l(b-E)},s=[{name:"Select Product",component:e.jsx(ve,{formula:d,otherFormulas:a,setOtherFormulas:i,items:k,goToNextPage:o,bundles:A,freeShipping:_,freeShippingBannerText:N})},{name:"Select Color",component:e.jsx(je,{formula:d,otherFormulas:a,items:k,defaultColors:P,goToNextPage:o,goToPrevPage:p,setSelectedPlan:S})},{name:"Select Plan",component:e.jsx(Ne,{formula:d,otherFormulas:a,goToNextPage:o,goToPrevPage:p,setSelectedPlan:S,session:h,setSession:c,bundles:A,planes:v,recaptchaSiteKey:g})},{name:"Checkout",component:e.jsx(Ce,{formula:d,otherFormulas:a,goToPrevPage:p,publicKey:q,selectedPlan:y,goToNextPage:o,bundles:A,planes:v,session:h,freeShipping:_,freeShippingMinimumAmount:f,freeShippingAmount:w,freeShippingZones:j})}],m=s[b].component;return u.useEffect(()=>{D.Local.set("vua_formula",d)},[null]),e.jsx(ce,{...x,session:h,children:m})};de((x,d)=>{ie(x).render(e.jsx(ke,{...d}))});
