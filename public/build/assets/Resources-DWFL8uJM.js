var F=Object.defineProperty;var T=(o,t,n)=>t in o?F(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var E=(o,t,n)=>(T(o,typeof t!="symbol"?t+"":t,n),n);import{R as r,r as i}from"./Footer-B80Lgev0.js";import{c as D}from"./ReactAppend-BbdAvxK7.js";import{A as N}from"./Adminto-BGAXhy00.js";import{C as q}from"./CreateReactScript-QlbMmlWm.js";import{B as C}from"./BusinessIWorkCard-rEAJw_L_.js";import{T as I}from"./Table-w4bmKtdW.js";import{M as S}from"./Modal-XkEoS3lt.js";import{I as R}from"./InputFormGroup-CZpmvUlF.js";import{R as c}from"./ReactAppend-BdSt2FVL.js";import"./TippyButton-TBKQ4cvW.js";import{S as v}from"./SelectFormGroup-qoOLdQsk.js";import{Q as A}from"./QuillFormGroup-CKFL5hYu.js";import{D as h}from"./DxButton-CsjWvhyj.js";import"./WhatsAppStatuses-BF-FjpQX.js";import"./NavBar-BThilt_4.js";import"./___vite-browser-external_commonjs-proxy-BiUUwCOo.js";import"./MenuItem-COCTGmIB.js";class B extends C{constructor(){super(...arguments);E(this,"path","coach/resources")}}const x=new B,G=({specialties:o})=>{const t=i.useRef(),n=i.useRef(),l=i.useRef(),a=i.useRef(),u=i.useRef(),m=i.useRef(),p=i.useRef(),d=i.useRef(),f=i.useRef(),[w,b]=i.useState(!1),g=e=>{e!=null&&e.id?b(!0):b(!1),l.current.value=(e==null?void 0:e.id)??"",a.current.value=(e==null?void 0:e.name)??"",u.current.value=(e==null?void 0:e.tags)??"",$(m).val((e==null?void 0:e.specialty_id)??"").trigger("change"),$(p).val((e==null?void 0:e.social_media)??"").trigger("change"),d.current.value=(e==null?void 0:e.media_id)??"",f.editor.root.innerHTML=e==null?void 0:e.description,$(n.current).modal("show")},k=async e=>{e.preventDefault();const s={id:l.current.value||void 0,name:a.current.value,tags:u.current.value,specialty_id:m.current.value,social_media:p.current.value,media_id:d.current.value,description:f.current.value};await x.save(s)&&($(t.current).dxDataGrid("instance").refresh(),$(n.current).modal("hide"))},y=async e=>{await statusesRest.delete(e)&&$(t.current).dxDataGrid("instance").refresh()};return r.createElement(r.Fragment,null,r.createElement(I,{gridRef:t,title:"Recursos",rest:x,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo recurso",hint:"Nuevo recurso",onClick:()=>g()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"specialty.name",caption:"Especialidad"},{dataField:"name",caption:"Titulo"},{dataField:"id",caption:"Imagen",width:"90px",cellTemplate:(e,{data:s})=>{c(e,r.createElement("img",{src:"/api/cover/thumbnail/null",style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"}}))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:s})=>{switch(s.status){case 1:c(e,r.createElement("span",{className:"badge bg-success rounded-pill"},"Activo"));break;case 0:c(e,r.createElement("span",{className:"badge bg-danger rounded-pill"},"Inactivo"));break;default:c(e,r.createElement("span",{className:"badge bg-dark rounded-pill"},"Eliminado"));break}}},{caption:"Acciones",cellTemplate:(e,{data:s})=>{e.append(h({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>g(s)})),e.append(h({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>y(s.id)}))},allowFiltering:!1,allowExporting:!1}]}),r.createElement(S,{modalRef:n,title:w?"Editar recurso":"Agregar recurso",onSubmit:k,size:"md"},r.createElement("div",{className:"row",id:"resources-container"},r.createElement("input",{ref:l,type:"hidden"}),r.createElement(R,{eRef:a,label:"Titulo",col:"col-12",required:!0}),r.createElement(R,{eRef:u,label:"Tags (Separado por comas)",col:"col-12",required:!0}),r.createElement(v,{eRef:m,label:"Especialidad",dropdownParent:"#resources-container",required:!0},o.map((e,s)=>r.createElement("option",{key:`specialty-${s}`,value:e.id},e.name))),r.createElement(v,{eRef:p,label:"Red social",dropdownParent:"#resources-container",required:!0},r.createElement("option",{value:"youtube"},"YouTube"),r.createElement("option",{value:"facebook"},"Facebook")),r.createElement(R,{eRef:d,label:"Link del recurso",col:"col-12",required:!0}),r.createElement(A,{eRef:f,label:"Descripcion",col:"col-12",height:"240px",required:!0}))))};q((o,t)=>{D(o).render(r.createElement(N,{...t,title:"Recursos"},r.createElement(G,{...t})))});
