var k=Object.defineProperty;var E=(r,s,l)=>s in r?k(r,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[s]=l;var p=(r,s,l)=>(E(r,typeof s!="symbol"?s+"":s,l),l);import{j as e}from"./AboutHeader-CpM0iYLI.js";import{r as a}from"./index-B80Lgev0.js";import{c as A}from"./ReactAppend-CBRQCQGz.js";import{B}from"./Base-CTD76bxe.js";import{C as _}from"./CreateReactScript-B4L7iD9b.js";import{B as w}from"./Results-DSLuSBy_.js";import{R as v}from"./ReactAppend-C-tNgxIf.js";import{N as S}from"./Number2Currency-e57Tgsuk.js";import{R as N}from"./index-B1nVdsa0.js";import{m as j}from"./main-B2CtU6ez.js";import{S as T}from"./sweetalert2.all-Dh0rZL5X.js";import{L as M}from"./Logout-CPQZ59pt.js";import"./index-DO3Aws4m.js";import"./tippy-react.esm-CHhA99mn.js";import"./Base-TVC2AMtK.js";import"./index.esm-Cu-mVv1q.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";/* empty css               *//* empty css              */import"./index-CqrOtH36.js";class O extends w{constructor(){super(...arguments);p(this,"path","customer/user-formulas")}}const z=new O,D=({id:r,name:s,created_at:l,has_treatment:t,scalp_type:o,hair_type:n,hair_goals:i,fragrance:u,index:m,setFormulas:x})=>{const[c,d]=a.useState(!1),b=a.useRef(),f=async y=>{if(s==b.current.value)return d(!1);const g=await z.save({id:r,name:b.current.value});g&&(x(R=>R.map(h=>(h.id==g.data.id&&(h.name=g.data.name),h))),d(!1))};return e.jsx("div",{className:"relative w-full",children:e.jsxs("div",{className:"relative bg-[#F7F7E7] p-4 rounded-xl w-full pb-8",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{children:c?e.jsx("input",{ref:b,type:"text",className:"w-full outline-none px-3 py-1 rounded-md",defaultValue:s,onBlur:f,autoFocus:!0}):e.jsx("span",{className:"text-lg font-bold",onClick:()=>d(!0),children:s||e.jsxs(e.Fragment,{children:["Fórmula ",m+1]})})}),e.jsxs("small",{children:["Creado el ",moment(l).format("ll")]})]}),e.jsxs("div",{className:"text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("b",{children:"🧐 Tratamiento"}),":"," ",t.description]}),e.jsxs("div",{children:[e.jsx("b",{children:"👀 Cuero cabelludo"}),": "," ",o.description]}),e.jsxs("div",{children:[e.jsx("b",{children:"✅ Tipo de cabello"}),":"," ",n.description]}),e.jsxs("div",{children:[e.jsx("b",{children:"💡 Objetivos"}),":"," ",i.map(y=>y.description).join(", ")]}),e.jsxs("div",{children:[e.jsx("b",{children:"🫙 Fragancia"}),":"," ",u.name]})]}),e.jsxs("button",{className:"absolute -bottom-4 bg-[#A191B8] text-sm text-white px-4 py-2 rounded-full",href:`/test/result/${r}`,children:["VOLVER A COMPRAR ",e.jsx("i",{className:"mdi mdi-arrow-top-right"})]})]})})};class F{}p(F,"save",async s=>{try{const{status:l,result:t}=await j.Fetch("/api/customer/profile",{method:"PATCH",body:JSON.stringify(s)});if(!l)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return j.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:t.message,type:"success"}),!0}catch(l){return j.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:l.message,type:"danger"}),!1}});const V=({gridRef:r,rest:s,columns:l,toolBar:t,masterDetail:o,filterValue:n,exportable:i,exportableName:u,customizeCell:m=()=>{},selectable:x=!1})=>(a.useEffect(()=>{DevExpress.localization.locale(navigator.language),$(r.current).dxDataGrid({language:"es",dataSource:{load:async c=>await s.paginate({...c,_token:$('[name="csrf_token"]').attr("content")})},onToolbarPreparing:c=>{const{items:d}=c.toolbarOptions;t(d)},remoteOperations:!0,columnResizingMode:"widget",allowColumnResizing:!0,allowColumnReordering:!0,columnAutoWidth:!0,scrollbars:"auto",filterPanel:{visible:!0},searchPanel:{visible:!0},headerFilter:{visible:!0,search:{enabled:!0}},height:"calc(100vh - 250px)",filterValue:n||null,export:{enabled:i},selection:x?{mode:"multiple",selectAllMode:"page"}:null,onExporting:function(c){var d=new ExcelJS.Workbook,b=d.addWorksheet("Main sheet");DevExpress.excelExporter.exportDataGrid({worksheet:b,component:c.component,customizeCell:function(f){m(f),f.excelCell.alignment={horizontal:"left",vertical:"top",...f.excelCell.alignment}}}).then(function(){d.xlsx.writeBuffer().then(function(f){saveAs(new Blob([f],{type:"application/octet-stream"}),`${u}.xlsx`)})})},rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!0,applyFilter:"auto"},filterBuilderPopup:{visible:!1,position:{of:window,at:"top",my:"top",offset:{y:10}}},paging:{pageSize:10},pager:{visible:!0,allowedPageSizes:[5,10,25,50,100],showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},allowFiltering:!0,scrolling:{mode:"standard",useNative:!0,preloadEnabled:!0,rowRenderingMode:"standard"},columnChooser:{title:"Mostrar/Ocultar columnas",enabled:!0,mode:"select",search:{enabled:!0}},columns:l,masterDetail:o,onContentReady:(...c)=>{tippy(".tippy-here",{arrow:!0,animation:"scale"})}}).dxDataGrid("instance"),tippy(".dx-button",{arrow:!0})},[null]),e.jsx("div",{id:"grid-container",ref:r})),q=({title:r,gridRef:s,rest:l,columns:t,toolBar:o,masterDetail:n,filterValue:i,exportable:u=!1,customizeCell:m,selectable:x=!1})=>e.jsx(V,{exportableName:r,gridRef:s,rest:l,columns:t.filter(Boolean),toolBar:o,masterDetail:n,filterValue:i,exportable:u,customizeCell:m,selectable:x});class P extends w{constructor(){super(...arguments);p(this,"path","customer/sales")}}const I=new P,G=({items:r})=>{const s=a.useRef();return e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl border-b pb-2 mb-4 font-bold",children:"Historial de compras 📃"}),e.jsx("div",{className:"p-0",children:e.jsx(q,{gridRef:s,rest:I,toolBar:l=>{l.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(s.current).dxDataGrid("instance").refresh()}})},columns:[{caption:"Compra",width:"325px",cellTemplate:(l,{data:t})=>{var o;v(l,e.jsxs(e.Fragment,{children:[e.jsxs("b",{className:"block text-lg",children:["Compraste ",((o=t==null?void 0:t.bundle)==null?void 0:o.name)||"solo 1 producto"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Formula"}),": ",t.formula.name??"Sin nombre"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Envio a"}),": ",t==null?void 0:t.address," ",t==null?void 0:t.number,e.jsxs("small",{className:"opacity-75 block",children:[(t==null?void 0:t.province)??(t==null?void 0:t.district),", ",t==null?void 0:t.department,", ",t==null?void 0:t.country," ",(t==null?void 0:t.zip_code)&&e.jsxs(e.Fragment,{children:["- ",t==null?void 0:t.zip_code]})]})]})]}))}},{dataField:"total_amount",caption:"Total",dataType:"number",cellTemplate:(l,{data:t})=>{l.css({textAlign:"center",verticalAlign:"middle"}),l.text(`S/. ${S(t.total_amount)}`)}},{dataField:"status.name",caption:"Estado",cellTemplate:(l,{data:t})=>{l.css({verticalAlign:"middle"}),v(l,e.jsx("span",{className:"block mx-auto w-max px-2 py-1 rounded-full",style:{backgroundColor:t.status.color?`${t.status.color}2e`:"#3333332e",color:t.status.color??"#333"},children:t.status.name}))}},{dataField:"created_at",caption:"Fecha creacion",dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss",sortOrder:"desc",cellTemplate:(l,{text:t})=>{l.css({textAlign:"center",verticalAlign:"middle"}),l.text(t)}}]})})]})};N.setAppElement("#app");const U=({session:r})=>{const[s,l]=a.useState(!1),t=a.useRef(),o=a.useRef(),n=a.useRef(),i=a.useRef(),u=a.useRef(),m=a.useRef(),x=async c=>{c.preventDefault(),await F.save({name:t.current.value,lastname:o.current.value,phone:n.current.value,address:i.current.value,address_number:u.current.value,address_reference:m.current.value})&&(T.fire({title:"Información actualizada",text:"Tu información se ha actualizado correctamente.",icon:"success",timer:1500,showConfirmButton:!1}),location.reload())};return a.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl border-b pb-2 mb-4 font-bold",children:"Tu informacion personal"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6 pb-10 mb-4 items-start relative border bg-[#F7F7E7] rounded-3xl",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Nombres y apellidos:"}),e.jsxs("p",{children:[r.name," ",r.lastname]})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Correo electronico:"}),e.jsx("p",{children:r.email})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Telefono:"}),e.jsx("p",{children:r.phone||e.jsx("i",{className:"opacity-75",children:"- Sin telefono -"})})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Direccion:"}),e.jsxs("p",{children:[(r==null?void 0:r.address)||"Sin direccion"," ",(r==null?void 0:r.address_number)||"SN",e.jsxs("small",{className:"opacity-75 block -mt-1",children:[(r==null?void 0:r.province)??(r==null?void 0:r.district),", ",r==null?void 0:r.department,", ",r==null?void 0:r.country," ",(r==null?void 0:r.zip_code)&&e.jsxs(e.Fragment,{children:["- ",r==null?void 0:r.zip_code]})]})]})]}),e.jsxs("button",{className:"absolute -bottom-4 bg-[#A191B8] text-sm text-white px-4 py-2 rounded-full",onClick:()=>l(!0),children:[e.jsx("i",{className:"mdi mdi-pencil"})," EDITAR INFORMACION"]})]})]}),e.jsx(N,{isOpen:s,onRequestClose:()=>l(!1),className:"absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 bg-white p-10 rounded-2xl shadow-lg w-[95%] max-w-lg max-h-[95vh] overflow-y-auto",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{class:"grid gap-6 mb-6 md:grid-cols-6",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{for:"first_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Nombres"}),e.jsx("input",{ref:t,type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none",required:!0,defaultValue:r.name})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Apellidos"}),e.jsx("input",{ref:o,type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none",required:!0,defaultValue:r.lastname})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Correo"}),e.jsx("input",{type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed disabled:bg-gray-100",required:!0,defaultValue:r.email,disabled:!0})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{for:"first_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Pais"}),e.jsx("input",{type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed disabled:bg-gray-100",required:!0,defaultValue:"Perú",disabled:!0})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Teléfono"}),e.jsx("input",{ref:n,type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none",required:!0,defaultValue:r.phone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{for:"first_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Departamento"}),e.jsx("input",{type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed disabled:bg-gray-100",required:!0,defaultValue:r.department,disabled:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Provincia"}),e.jsx("input",{type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed disabled:bg-gray-100",required:!0,defaultValue:r.province,disabled:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Distrito"}),e.jsx("input",{type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed disabled:bg-gray-100",required:!0,defaultValue:r.district,disabled:!0})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Dirección"}),e.jsx("input",{ref:i,type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed",required:!0,defaultValue:r.address})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Número"}),e.jsx("input",{ref:u,type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed",required:!0,defaultValue:r.address_number})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{for:"last_name",class:"block mb-2 text-sm font-medium text-gray-900",children:"Referencia"}),e.jsx("input",{ref:m,type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#F7C2C6] focus:border-[#F7C2C6] block w-full p-2.5 outline-none disabled:cursor-not-allowed",required:!0,defaultValue:r.address_reference})]})]}),e.jsxs("button",{className:"bg-[#A191B8] text-sm text-white px-4 py-2 rounded-full",children:[e.jsx("i",{className:"fa fa-save me-2"}),"GUARDAR INFORMACIÓN"]})]})})]})},C=({items:r})=>{const[s,l]=a.useState(r);return e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl border-b pb-2 mb-4 font-bold",children:"Tus fórmulas 🫧"}),e.jsxs("div",{className:"flex flex-col gap-12 pb-4 items-center relative",children:[s.length==0&&e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Ups!"}),e.jsx("p",{className:"text-sm mb-4",children:"Al parecer no tienes formulas"}),e.jsx("button",{href:"/test",className:"rounded-full px-3 py-2 text-white bg-[#A191B8] text-sm",children:"CREA TU FORMULA"})]}),s.map((t,o)=>e.jsx(D,{...t,index:o,setFormulas:l},o))]})]})},H=({session:r,formulas:s,sales:l})=>{const[t,o]=a.useState("formulas"),n=()=>{switch(t){case"formulas":return e.jsx(C,{items:s});case"purchases":return e.jsx(G,{items:l});case"informacion":return e.jsx(U,{session:r});default:return e.jsx(C,{})}};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"px-[5%] md:px-[7.5%] lg:px-[10%] py-[5%] bg-[#F9F3EF] text-[#404040]",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["¡Bienvenid@, ",r.name.split(" ")[0],"! ✨"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-5",children:[e.jsx("div",{className:"w-full md:w-1/3 lg:w-1/4 md:bg-[#EFBEC1] rounded-xl",children:e.jsxs("ul",{className:"text-center md:text-start text-[#404040] md:text-white grid sm:grid-cols-2 md:flex md:flex-col gap-2 text-sm font-light tracking-wider md:p-4",children:[e.jsx("li",{className:`px-4 py-2 border-[#404040] border md:border-none hover:bg-[#EFBEC1] md:hover:bg-[#ffffff33] rounded cursor-pointer ${t==="formulas"&&"bg-[#EFBEC1] md:bg-[#ffffff33] text-white"}`,onClick:()=>o("formulas"),children:"Fórmulas creadas"}),e.jsx("li",{className:`px-4 py-2 border-[#404040] border md:border-none hover:bg-[#EFBEC1] md:hover:bg-[#ffffff33] rounded cursor-pointer ${t==="purchases"&&"bg-[#EFBEC1] md:bg-[#ffffff33] text-white"}`,onClick:()=>o("purchases"),children:"Mis compras"}),e.jsx("li",{className:`px-4 py-2 border-[#404040] border md:border-none hover:bg-[#EFBEC1] md:hover:bg-[#ffffff33] rounded cursor-pointer ${t==="informacion"&&"bg-[#EFBEC1] md:bg-[#ffffff33] text-white"}`,onClick:()=>o("informacion"),children:"Información personal"}),e.jsx("li",{className:"px-4 py-2 border-[#404040] border md:border-none hover:bg-[#EFBEC1] md:hover:bg-[#ffffff33] rounded cursor-pointer",onClick:M,children:"Cerrar sesión"})]})}),e.jsx("div",{className:"bg-white p-4 w-full md:w-2/3 lg:w-3/4 rounded-xl",children:n()})]})]})})};_((r,s)=>{A(r).render(e.jsx(B,{...s,children:e.jsx(H,{...s})}))});
