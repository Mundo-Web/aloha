var p=Object.defineProperty;var x=(a,t,e)=>t in a?p(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var f=(a,t,e)=>(x(a,typeof t!="symbol"?t+"":t,e),e);import{j as r}from"./AboutHeader-CpM0iYLI.js";import{r as s}from"./index-B80Lgev0.js";import{S as b}from"./sweetalert2.all-Dh0rZL5X.js";import{B as h}from"./Results-CGjdirJh.js";import{m as j}from"./main-B2CtU6ez.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";class g extends h{constructor(){super(...arguments);f(this,"path","user-formulas")}}const v=new g,F=({test:a,setTest:t,session:e})=>{const o=s.useRef(),[i,m]=s.useState(!1),u=async l=>{var c,d;if((c=l==null?void 0:l.preventDefault)==null||c.call(l),i)return;if(!((d=o.current.value)==null?void 0:d.trim()))return b.fire({icon:"error",title:"Oops...",text:"Por favor, ingresa tu correo electr√≥nico"});m(!0);const n=await v.save({...a,email:o.current.value});m(!1),n&&(j.Local.delete("test"),location.href=`/test/result/${n.data.id}`,t({}))};return s.useEffect(()=>{e&&u({target:{value:e==null?void 0:e.email}})},[null]),r.jsx("section",{className:"p-[5%] py-[15%] md:py-[10%] lg:py-[5%] bg-white text-center text-[#404040]",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsxs("h1",{className:"text-2xl mb-4",children:["¬°Por √∫ltimo, para envi√°rte tu f√≥rmula ",r.jsx("br",{})," personalizada d√©janos ",r.jsx("b",{children:"tu correo!"})]}),r.jsx("p",{className:"mb-4",children:"y recibe 10% off con un c√≥digo exclusivo para ti ü§´"}),r.jsxs("form",{className:"relative",onSubmit:u,children:[r.jsx("input",{ref:o,className:"border text-center border-[#9577B9] text-[#9577B9] bg-white text-sm rounded-full w-full px-5 py-2.5 outline-none",type:"email",placeholder:"ESCRIBE AQU√ç",defaultValue:e==null?void 0:e.email,required:!0,disabled:i}),r.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 right-3 w-6 h-6 bg-[#A191B8] text-white font-bold rounded-full",type:"submit",disabled:i,children:r.jsx("i",{className:`mdi ${i?"mdi-loading fa-spin":"mdi-arrow-right"}`})})]})]})})};export{F as default};
