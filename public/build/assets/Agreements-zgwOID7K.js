var f=Object.defineProperty;var x=(t,r,n)=>r in t?f(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;var l=(t,r,n)=>(x(t,typeof r!="symbol"?r+"":r,n),n);import{j as o}from"./StatisticCard-Bdo2C3ON.js";import{r as s}from"./index-DFv2mRv-.js";import{c as b}from"./ReactAppend-CwiwA4iz.js";import{B as g}from"./Base-zNxy_CdJ.js";import{C as h}from"./CreateReactScript-yWJ4gJYl.js";import{T as C}from"./Table-_VaaJVnk.js";import{R as i}from"./ReactAppend-CaRiPI_F.js";import{D as d}from"./DxButton-CsjWvhyj.js";import{B as T}from"./Content-DtiuTMAn.js";import{M as R}from"./Modal-D1Rs9-bN.js";import"./index-DgyC5pTR.js";import"./tippy-react.esm-BVvHiWwH.js";/* empty css              */import"./main-BBbUrZUL.js";import"./___vite-browser-external_commonjs-proxy-BQdpDcDf.js";import"./index.esm-B502ZfUP.js";/* empty css               */import"./InputFormGroup-z0D3_N8V.js";class j extends T{constructor(){super(...arguments);l(this,"path","coach/agreements")}}const p=new j,w=()=>{const t=s.useRef(),[r,n]=s.useState(1),[m,c]=s.useState(null),u=async e=>{const{isConfirmed:a}=await Swal.fire({title:"Eliminar registro",text:"Â¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!a||!await p.delete(e)||$(t.current).dxDataGrid("instance").refresh()};return o.jsxs(o.Fragment,{children:[o.jsx(C,{gridRef:t,title:"Acuerdos",rest:p,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>onModalOpen()}})},onRefresh:({summary:e})=>{e!=null&&e.contract_number&&n(e.contract_number)},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"coachee.name",caption:"Coachee",dataType:"string",cellTemplate:(e,{data:a})=>{e.text(`${a.coachee.name} ${a.coachee.lastname}`)}},{dataField:"contract_number",caption:"Acuerdo",dataType:"number",cellTemplate:(e,{data:a})=>{e.text("C"+String(a.contract_number).padStart(3,"0"))}},{dataField:"process_topic",caption:"Tema"},{dataField:"created_at",caption:"Fecha",cellTemplate:(e,{data:a})=>{e.text(moment(a.created_at).format("LL"))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:a})=>{switch(a.status){case 1:i(e,o.jsx("span",{className:"badge bg-success rounded-pill",children:"Aprobado"}));break;case 0:i(e,o.jsx("div",{children:o.jsx("span",{className:"badge bg-danger rounded-pill",children:"Observado"})}));break;default:i(e,o.jsx("span",{className:"badge bg-dark rounded-pill",children:"Pendiente"}));break}}},{caption:"Acciones",cellTemplate:(e,{data:a})=>{e.append(d({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>c(a)})),e.append(d({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>u(a.id)}))},allowFiltering:!1,allowExporting:!1}]}),o.jsx(R,{dataLoaded:m,setDataLoaded:c,onSave:()=>$(t.current).dxDataGrid("instance").refresh()})]})};h((t,r)=>{b(t).render(o.jsx(g,{...r,title:"Acuerdos",children:o.jsx(w,{...r})}))});
