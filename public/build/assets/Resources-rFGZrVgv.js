var F=Object.defineProperty;var T=(o,r,s)=>r in o?F(o,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[r]=s;var E=(o,r,s)=>(T(o,typeof r!="symbol"?r+"":r,s),s);import{R as t,r as n}from"./Accordion-B80Lgev0.js";import{c as B}from"./ReactAppend-CCMqV5u4.js";import{B as C}from"./Base-OU1LMgxd.js";import{C as D}from"./CreateReactScript-CMRUimfa.js";import{B as N}from"./BusinessIWorkCard-Bx4M_-JK.js";import{T as q}from"./Table-BYti2dT1.js";import{M as I}from"./Modal-DHkEiqp8.js";import{I as R}from"./InputFormGroup-DF0_5j3z.js";import{R as m}from"./ReactAppend-CcrUg4Ih.js";import{S as v}from"./SelectFormGroup-BDnyfbv9.js";import{Q as S}from"./QuillFormGroup-bCC0TPmm.js";import"./TippyButton-Ca89MSNc.js";import"./SelectAPIFormGroup-D3e_Xn4g.js";import"./___vite-browser-external_commonjs-proxy-DqvwVSHi.js";import"./MenuItem-YvjQIalw.js";class G extends N{constructor(){super(...arguments);E(this,"path","coach/resources")}}const h=({className:o,title:r,icon:s,onClick:c,...l})=>$("<div>").dxButton({hint:r,template:(u,a)=>{a.addClass(`${s} d-block`)},elementAttr:{class:`${o} position-relative me-1 px-1 py-0 tippy-here`,...l},onClick:c}),x=new G,M=({specialties:o})=>{const r=n.useRef(),s=n.useRef(),c=n.useRef(),l=n.useRef(),u=n.useRef(),a=n.useRef(),p=n.useRef(),d=n.useRef(),f=n.useRef(),[k,b]=n.useState(!1),g=e=>{e!=null&&e.id?b(!0):b(!1),c.current.value=(e==null?void 0:e.id)??"",l.current.value=(e==null?void 0:e.name)??"",u.current.value=(e==null?void 0:e.tags)??"",$(a).val((e==null?void 0:e.specialty_id)??"").trigger("change"),$(p).val((e==null?void 0:e.social_media)??"").trigger("change"),d.current.value=(e==null?void 0:e.media_id)??"",f.editor.root.innerHTML=e==null?void 0:e.description,$(s.current).modal("show")},w=async e=>{e.preventDefault();const i={id:c.current.value||void 0,name:l.current.value,tags:u.current.value,specialty_id:a.current.value,social_media:p.current.value,media_id:d.current.value,description:f.current.value};await x.save(i)&&($(r.current).dxDataGrid("instance").refresh(),$(s.current).modal("hide"))},y=async e=>{await statusesRest.delete(e)&&$(r.current).dxDataGrid("instance").refresh()};return t.createElement(t.Fragment,null,t.createElement(q,{gridRef:r,title:"Recursos",rest:x,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(r.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo recurso",hint:"Nuevo recurso",onClick:()=>g()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"specialty.name",caption:"Especialidad"},{dataField:"name",caption:"Titulo"},{dataField:"id",caption:"Imagen",width:"90px",cellTemplate:(e,{data:i})=>{m(e,t.createElement("img",{src:"/api/cover/thumbnail/null",style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"}}))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:i})=>{switch(i.status){case 1:m(e,t.createElement("span",{className:"badge bg-success rounded-pill"},"Activo"));break;case 0:m(e,t.createElement("span",{className:"badge bg-danger rounded-pill"},"Inactivo"));break;default:m(e,t.createElement("span",{className:"badge bg-dark rounded-pill"},"Eliminado"));break}}},{caption:"Acciones",cellTemplate:(e,{data:i})=>{e.append(h({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>g(i)})),e.append(h({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>y(i.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.createElement(I,{modalRef:s,title:k?"Editar recurso":"Agregar recurso",onSubmit:w,size:"md"},t.createElement("div",{className:"row",id:"resources-container"},t.createElement("input",{ref:c,type:"hidden"}),t.createElement(R,{eRef:l,label:"Titulo",col:"col-12",required:!0}),t.createElement(R,{eRef:u,label:"Tags (Separado por comas)",col:"col-12",required:!0}),t.createElement(v,{eRef:a,label:"Especialidad",dropdownParent:"#resources-container",required:!0},o.map((e,i)=>t.createElement("option",{key:`specialty-${i}`,value:e.id},e.name))),t.createElement(v,{eRef:p,label:"Red social",dropdownParent:"#resources-container",required:!0},t.createElement("option",{value:"youtube"},"YouTube"),t.createElement("option",{value:"facebook"},"Facebook")),t.createElement(R,{eRef:d,label:"Link del recurso",col:"col-12",required:!0}),t.createElement(S,{eRef:f,label:"Descripcion",col:"col-12",height:"240px",required:!0}))))};D((o,r)=>{B(o).render(t.createElement(C,{...r,title:"Recursos"},t.createElement(M,{...r})))});
