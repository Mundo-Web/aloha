import{R as t,r as o}from"./Footer-B80Lgev0.js";import{c as b}from"./ReactAppend-BbdAvxK7.js";import{C as g}from"./CreateReactScript-QlbMmlWm.js";import{R as i}from"./ReactAppend-BdSt2FVL.js";import{P as u}from"./PermissionsRest-BWS04-FT.js";import{A as v}from"./Adminto-BGAXhy00.js";import{M as x}from"./Modal-XkEoS3lt.js";import{T}from"./Table-w4bmKtdW.js";import{I as F}from"./InputFormGroup-CZpmvUlF.js";import{T as y}from"./TextareaFormGroup-CH1nUIqS.js";import{T as E}from"./TippyButton-DwRY6mBw.js";import"./MenuItem-COCTGmIB.js";import"./___vite-browser-external_commonjs-proxy-BiUUwCOo.js";import"./NavBar-BThilt_4.js";import"./WhatsAppStatuses-BF-FjpQX.js";import"./TippyButton-TBKQ4cvW.js";const w=({can:n})=>{const l=o.useRef(),a=o.useRef(),s=o.useRef(),c=o.useRef(),m=o.useRef(),[p,d]=o.useState(!1),f=e=>{e!=null&&e.id?d(!0):d(!1),s.current.value=(e==null?void 0:e.id)||null,c.current.value=(e==null?void 0:e.name)||null,m.current.value=(e==null?void 0:e.description)||null,$(a.current).modal("show")},R=async e=>{e.preventDefault();const r={id:s.current.value||void 0,name:c.current.value,description:m.current.value};await u.save(r)&&($(l.current).dxDataGrid("instance").refresh(),$(a.current).modal("hide"))},h=async e=>{await u.delete(e)&&$(l.current).dxDataGrid("instance").refresh()};return t.createElement(t.Fragment,null,t.createElement(T,{gridRef:l,title:"Permisos",rest:u,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(l.current).dxDataGrid("instance").refresh()}}),n("permissions","root","all","create")&&e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",hint:"Nuevo registro",onClick:()=>f()}})},columns:[{dataField:"id",caption:"ID",dataType:"number",sortOrder:"asc"},{dataField:"name",caption:"Permiso"},{dataField:"description",caption:"Descripcion"},{dataField:"created_at",caption:"Fecha creacion",dataType:"date",cellTemplate:(e,{data:r})=>{i(e,t.createElement("span",null,moment(r.created_at).format("LL")))}},{dataField:"updated_at",caption:"Fecha actualizacion",dataType:"date",cellTemplate:(e,{data:r})=>{i(e,t.createElement("span",null,moment(r.updated_at).format("LL")))}},n("permissions","root","all","update","delete")?{caption:"Acciones",cellTemplate:(e,{data:r})=>{e.attr("style","display: flex; gap: 4px; overflow: unset"),n("permissions","root","all","update")&&i(e,t.createElement(E,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>f(r)},t.createElement("i",{className:"fa fa-pen"}))),n("permissions","root","all","delete")&&i(e,t.createElement(E,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>h(r.id)},t.createElement("i",{className:"fa fa-trash-alt"})))},allowFiltering:!1,allowExporting:!1}:null]}),t.createElement(x,{modalRef:a,title:p?"Editar permiso":"Agregar permiso",onSubmit:R},t.createElement("div",{className:"row"},t.createElement("p",null,"Intenta con el formato ",t.createElement("code",null,"ventana.permiso"),". Ej: ",t.createElement("code",null,"clients.create"),", ",t.createElement("code",null,"clients.list"),", ",t.createElement("code",null,"clients.update"),", ",t.createElement("code",null,"clients.delete")),t.createElement("input",{ref:s,type:"hidden"}),t.createElement(F,{eRef:c,label:"Permiso",col:"col-12",required:!0,disabled:p}),t.createElement(y,{eRef:m,label:"Descripcion",col:"col-12"}))))};g((n,l)=>{if(!l.can("permissions","root","all","list"))return location.href="/";b(n).render(t.createElement(v,{...l,title:"Permisos"},t.createElement(w,{...l})))});
