import{j as e}from"./AboutHeader-CpM0iYLI.js";import{r as s}from"./index-B80Lgev0.js";import{c as p}from"./ReactAppend-CBRQCQGz.js";import{r as n}from"./server.browser-D3N0_gce.js";import{C as x}from"./CreateReactScript-BTmFJSrT.js";import{B as u}from"./Base-BEyz4_Va.js";import{T as f,D as d,S as h,a as m}from"./SendingHistoryRest-DFck5hpJ.js";import{R as i}from"./ReactAppend-C-tNgxIf.js";import"./index-DO3Aws4m.js";import"./index.esm-Cu-mVv1q.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./main-B2CtU6ez.js";/* empty css               *//* empty css              */import"./tippy-react.esm-CHhA99mn.js";import"./Logout-CPQZ59pt.js";import"./WhatsAppModal-CjZ0YwJN.js";import"./sweetalert2.all-Dh0rZL5X.js";import"./Results-DSLuSBy_.js";const c=new h,j=()=>{const l=s.useRef();s.useRef(),s.useRef(),s.useRef(),s.useRef(),s.useRef(),s.useState(!1);const r=async t=>{await c.reSend(t)&&$(l.current).dxDataGrid("instance").refresh()};return e.jsx(e.Fragment,{children:e.jsx(f,{gridRef:l,title:e.jsx("h4",{className:"header-title my-0",children:"Historial de envios"}),rest:c,toolBar:t=>{t.unshift(d({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(l.current).dxDataGrid("instance").refresh()})),t.unshift(d({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>onOpenModal()}))},pageSize:25,columns:[{dataField:"created_at",dataType:"datetime",caption:"Fecha",width:"180px",sortOrder:"desc",cellTemplate:(t,{data:a})=>{var o;t.text(moment((o=a.created_at)==null?void 0:o.replace("Z","+10:00")).format("lll"))}},{dataField:"type",caption:"Tipo",width:"120px",cellTemplate:(t,{value:a})=>{a=="WhatsApp"?i(t,e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-whatsapp me-1"}),a]})):i(t,e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-email me-1"}),a]}))}},{dataField:"name",caption:"Plantilla"},{dataField:"completed",caption:"Completados",dataType:"number",width:"80px",cellTemplate:(t,{value:a})=>{t.html(n(e.jsx("b",{className:"text-success",children:a})))}},{dataField:"failed",caption:"Fallidos",dataType:"number",width:"80px",cellTemplate:(t,{value:a})=>{t.html(n(e.jsx("b",{className:"text-danger",children:a})))}},{dataField:"total",caption:"Total",dataType:"number",width:"80px",cellTemplate:(t,{value:a})=>{t.html(n(e.jsx("b",{className:"text-primary",children:a})))}},{dataField:"status",caption:"Estado",dataType:"boolean",width:"140px",cellTemplate:(t,{data:a})=>{a.status===1&&i(t,e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-check me-1"}),e.jsx("span",{children:"Terminado"})]})),a.status===0&&i(t,e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-alert me-1"}),e.jsx("span",{children:"Fallido"})]})),a.status===null&&i(t,e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-spin mdi-autorenew me-1"}),e.jsx("span",{children:"En curso"})]}))},lookup:{dataSource:[{key:1,value:"Completado"},{key:0,value:"Enviando"},{key:null,value:"Pendiente"}],valueExpr:"key",displayExpr:"value"}},{caption:"Acciones",width:"130px",cellTemplate:(t,{data:a})=>{t.attr("style","display: flex; gap: 4px; overflow: unset"),a.status===null&&i(t,e.jsx(m,{className:"btn btn-xs btn-soft-primary",title:"Reintentar envio",onClick:()=>r(a.id),children:e.jsx("i",{className:"mdi mdi-reload"})})),a.status!==null&&i(t,e.jsx(m,{className:"btn btn-xs btn-soft-dark",title:"Ver detalles de envio",onClick:()=>console.log("hola"),children:e.jsx("i",{className:"mdi mdi-format-list-bulleted-type"})}))},allowFiltering:!1,allowExporting:!1}]})})};x((l,r)=>{p(l).render(e.jsx(u,{...r,title:"Historial de envios",children:e.jsx(j,{...r})}))});
