var v=Object.defineProperty;var j=(i,e,t)=>e in i?v(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var g=(i,e,t)=>(j(i,typeof e!="symbol"?e+"":e,t),t);import{j as s}from"./AboutHeader-QvZ8i92b.js";import{r as l}from"./index-uubelm5h.js";import{c as w}from"./ReactAppend-C3qAwPla.js";import{C as E}from"./CreateReactScript-Bp1rCZww.js";import{R as y}from"./ReactAppend-BImswh4V.js";import{m as c}from"./main-_LuzYDr5.js";import{B as R}from"./Base-CU5RJThd.js";import{M as N}from"./Modal-BKhX55d0.js";import{T}from"./Table-HlE6uK-n.js";import{I as b}from"./InputFormGroup--z6bRsIV.js";import{i as C}from"./tippy-react.esm-uoFc-fr3.js";/* empty css              */import"./index-DybDQSmn.js";import"./index.esm-Bf_f5uRl.js";import"./___vite-browser-external_commonjs-proxy-vlWEfB-S.js";/* empty css               */const F=(i,e)=>{i.root.innerHTML=e};class m{}g(m,"paginate",async e=>{const{result:t}=await c.Fetch("/api/settings/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return t}),g(m,"save",async e=>{try{const{status:t,result:o}=await c.Fetch("/api/settings",{method:"POST",body:JSON.stringify(e)});if(!t)throw new Error((o==null?void 0:o.message)||"Ocurrio un error inesperado");return c.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:o.message,type:"success"}),!0}catch(t){return c.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),g(m,"status",async({id:e,status:t})=>{try{const{status:o,result:n}=await c.Fetch("/api/settings/status",{method:"PATCH",body:JSON.stringify({id:e,status:t})});if(!o)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return c.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:n.message,type:"success"}),!0}catch(o){return c.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:o.message,type:"danger"}),!1}}),g(m,"delete",async e=>{try{const{status:t,result:o}=await c.Fetch(`/api/settings/${e}`,{method:"DELETE"});if(!t)throw new Error((o==null?void 0:o.message)??"Ocurrio un error inesperado");return c.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:o.message,type:"success"}),!0}catch(t){return c.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}});const S=({col:i,label:e,eRef:t,value:o,required:n=!1,rows:a=3,theme:f="snow",height:h="100px"})=>{const p=l.useRef();return l.useEffect(()=>{const u=new Quill(p.current,{theme:f,modules:{toolbar:[[{font:[]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{header:[!1,1,2,3,4,5,6]},"blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["direction",{align:[]}],["link","image","video"],["clean"]]}});u.on("text-change",()=>{t.current.value=u.root.innerHTML}),t.editor=u,u.root.innerHTML=o??""},[null]),s.jsxs("div",{className:`form-group ${i} mb-2`,style:{height:"max-content"},children:[s.jsxs("label",{htmlFor:"",children:[e," ",n&&s.jsx("b",{className:"text-danger",children:"*"})]}),s.jsx("div",{ref:p,style:{height:h}}),s.jsx("input",{ref:t,type:"hidden",required:n,rows:a})]})},O=({title:i,className:e,onClick:t,children:o,eRef:n,...a})=>s.jsx(C,{content:i,arrow:!0,children:s.jsx("button",{ref:n,className:e,onClick:t,...a,children:o})}),k=({can:i})=>{const e=l.useRef(),t=l.useRef(),o=l.useRef(),n=l.useRef(),a=l.useRef(),f=l.useRef(),[h,p]=l.useState(!1),u=r=>{r!=null&&r.id?p(!0):p(!1),o.current.value=(r==null?void 0:r.id)||null,n.current.value=(r==null?void 0:r.name)||null,F(a.editor,(r==null?void 0:r.value)||null),f.current.value=(r==null?void 0:r.description)||null,$(t.current).modal("show")},x=async r=>{r.preventDefault();const d={id:o.current.value||void 0,name:n.current.value,value:a.current.value,description:f.current.value};await m.save(d)&&($(e.current).dxDataGrid("instance").refresh(),$(t.current).modal("hide"))};return s.jsxs(s.Fragment,{children:[s.jsx(T,{gridRef:e,title:"Configuracion",rest:m,toolBar:r=>{r.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(e.current).dxDataGrid("instance").refresh()}}),r.unshift({widget:"dxButton",location:"after",options:{icon:"plus",hint:"Nuevo registro",onClick:()=>u()}})},columns:[{dataField:"id",caption:"ID",dataType:"number",sortOrder:"asc"},{dataField:"name",caption:"Estado de tabla"},{dataField:"description",caption:"Descripcion",cellTemplate:(r,{value:d})=>{d?y(r,d):y(r,s.jsx("i",{className:"text-muted",children:"- Sin descripcion -"}))}},{caption:"Acciones",cellTemplate:(r,{data:d})=>{i("settings","root","all","update")&&y(r,s.jsx(O,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>u(d),children:s.jsx("i",{className:"fa fa-pen"})}))},allowFiltering:!1,allowExporting:!1}]}),s.jsx(N,{modalRef:t,title:h?"Editar configuracion":"Agregar configuracion",onSubmit:x,size:"md",children:s.jsxs("div",{className:"row",id:"settings-crud-container",children:[s.jsx("input",{ref:o,type:"hidden"}),s.jsx(b,{eRef:n,label:"Alias",col:"col-12",required:!0}),s.jsx(b,{eRef:f,label:"Descripcion",col:"col-12"}),s.jsx(S,{eRef:a,label:"Valor",col:"col-12",theme:"bubble",required:!0})]})})]})};E((i,e)=>{if(!e.can("settings","root","all","list"))return location.href="/";w(i).render(s.jsx(R,{...e,title:"Constantes de configuracion",children:s.jsx(k,{...e})}))});
