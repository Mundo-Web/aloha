var F=Object.defineProperty;var w=(t,r,s)=>r in t?F(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var R=(t,r,s)=>(w(t,typeof r!="symbol"?r+"":r,s),s);import{j as i}from"./AboutHeader-DEdD30eg.js";import{r as o}from"./index-RYns6xqu.js";import{c as E}from"./ReactAppend-vpV7VTGG.js";import{B as y}from"./Base-CfKzRmUy.js";import{C as D}from"./CreateReactScript-BERtc5uF.js";import{T as I,R as T,D as B}from"./ReactAppend-CDWOQzm8.js";import{M as S}from"./Modal-HDEzC3Rq.js";import{I as g}from"./InputFormGroup-DNs4FtPA.js";import{T as k}from"./TextareaFormGroup-soTxV26S.js";import{I as C}from"./ImageFormGroup-HdgfSlKu.js";import"./sweetalert2.all-DJo0UVK6.js";import{B as G}from"./Results-2jWyQwHC.js";import"./index-CXU7o9CY.js";import"./tippy-react.esm-DYFqe69e.js";/* empty css              */import"./Logout-ClY1Lmxq.js";import"./main-BjVPLcVK.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./index.esm-Bla6j_hB.js";/* empty css               */class N extends G{constructor(){super(...arguments);R(this,"path","admin/formulas")}}const b=new N,q=({})=>{const t=o.useRef(),r=o.useRef(),s=o.useRef(),m=o.useRef(),p=o.useRef(),u=o.useRef(),l=o.useRef(),[h,f]=o.useState(!1),j=e=>{e!=null&&e.id?f(!0):f(!1),s.current.value=(e==null?void 0:e.id)??"",m.current.value=(e==null?void 0:e.name)??"",p.current.value=(e==null?void 0:e.description)??"",u.current.value=(e==null?void 0:e.price)??"",l.image.src=`/api/items/media/${e==null?void 0:e.image}`,l.current.value=null,$(r.current).modal("show")},v=async e=>{e.preventDefault();const n={id:s.current.value||void 0,name:m.current.value,price:u.current.value,description:p.current.value},a=new FormData;for(const x in n)a.append(x,n[x]);const c=l.current.files[0];c&&a.append("image",c),await b.save(a)&&($(t.current).dxDataGrid("instance").refresh(),$(r.current).modal("hide"))};return i.jsxs(i.Fragment,{children:[i.jsx(I,{gridRef:t,title:"Fórmulas",rest:b,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Step",width:"150px",lookup:{dataSource:[{id:"has_treatment",name:"Recibió tratamiento"},{id:"scalp_type",name:"Tipo de cuero cabelludo"},{id:"hair_type",name:"Tipo de cabello"},{id:"hair_goals",name:"Objetivos"}],valueExpr:"id",displayExpr:"name"}},{dataField:"description",caption:"Respuesta",width:"200px"},{dataField:"image",caption:"Imagen",allowFiltering:!1,cellTemplate:(e,{data:n})=>{T(e,i.jsx("div",{className:"d-flex gap-1",children:n.supplies.map((a,c)=>i.jsx("img",{src:`/api/supplies/media/${a.image}`,style:{width:"40px",backgroundColor:"#fff",border:"1px solid rgba(0,0,0,.125)",aspectRatio:5/4,objectFit:"contain",objectPosition:"center",borderRadius:"4px"},onError:d=>d.target.src="/assets/img/supplies/acido-salicilico.png"},c))}))}},{caption:"Acciones",width:"60px",cellTemplate:(e,{data:n})=>{e.css("text-overflow","unset"),e.append(B({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>j(n)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsx(S,{modalRef:r,title:h?"Editar item":"Agregar item",onSubmit:v,size:"md",children:i.jsxs("div",{className:"row",id:"principal-container",children:[i.jsx("input",{ref:s,type:"hidden"}),i.jsx(C,{eRef:l,label:"Imagen",col:"col-md-4",aspect:3/4,onError:"/assets/img/routine/conditioner.png"}),i.jsxs("div",{className:"col-md-8",children:[i.jsx(g,{eRef:m,label:"Nombre",required:!0}),i.jsx(g,{eRef:u,label:"Precio",type:"number",step:.01,required:!0}),i.jsx(k,{eRef:p,label:"Resumen",rows:3,required:!0})]})]})})]})};D((t,r)=>{E(t).render(i.jsx(y,{...r,title:"Fórmulas",children:i.jsx(q,{...r})}))});
